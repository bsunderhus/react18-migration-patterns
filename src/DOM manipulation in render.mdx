# id: dom-manipulation-in-render

- Problem: Direct DOM manipulations should be avoided in the render phase of React components.
- Solution: Perform DOM manipulations within effect hooks or callbacks.
  1. no appending
  2. no removing
  3. no event listener (add/remove)
  4. no modifying styles or attributes
- Why: side effects in the render phase can lead to inconsistencies and unexpected behavior, especially in React concurrent mode where components may be rendered multiple times before being committed to the DOM.

### Anti-Pattern: Direct DOM manipulation in render

❌ Issue - Directly manipulating the DOM in the render phase can lead to inconsistencies and unexpected behavior.

```tsx
const { appLayoutRef } = useCoreLayoutConfig();

slotWidth &&
  appLayoutRef.current?.style.setProperty(`--${slotName}-width`, slotWidth);
```

✅ Solution - Move DOM manipulations into an effect hook.

```tsx
const { appLayoutRef } = useCoreLayoutConfig();
// or useLayoutEffect/useInsertionEffect
React.useEffect(() => {
  slotWidth &&
    appLayoutRef.current?.style.setProperty(`--${slotName}-width`, slotWidth);
}, [slotWidth]);
```
